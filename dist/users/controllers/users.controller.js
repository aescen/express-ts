"use strict";var __importDefault=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(exports,"__esModule",{value:!0});const argon2_1=__importDefault(require("argon2")),debug_1=__importDefault(require("debug")),users_service_1=__importDefault(require("../services/users.service")),log=(0,debug_1.default)("app:users-controller");class UsersController{async post(e,s){e.body.password=await argon2_1.default.hash(e.body.password);const a=await users_service_1.default.create(e.body);s.status(201).send({id:a})}async getList(e,s){const a=await users_service_1.default.list(0,100);s.status(200).send(a)}async getById(e,s){const a=await users_service_1.default.readById(e.body.id);s.status(200).send(a)}async getByEmail(e,s){const a=await users_service_1.default.readByEmail(e.params.email);s.status(200).send(a)}async putById(e,s){e.body.password=await argon2_1.default.hash(e.body.password),log(await users_service_1.default.partialUpdateById(e.body.id,e.body)),s.status(204).send({id:e.body.id})}async patchById(e,s){e.body.password&&(e.body.password=await argon2_1.default.hash(e.body.password)),log(await users_service_1.default.partialUpdateById(e.body.id,e.body)),s.status(204).send()}async deleteById(e,s){log(await users_service_1.default.deleteById(e.body.id)),s.status(204).send()}}exports.default=new UsersController;